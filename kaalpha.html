<!DOCTYPE html>
<html lang="kn">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>‡≤ï‡≤®‡≥ç‡≤®‡≤° ‡≤Ö‡≤ï‡≥ç‡≤∑‡≤∞‡≤ó‡≤≥‡≥Å ‚Äî ‡≤°‡≥ç‡≤∞‡≥ç‡≤Ø‡≤æ‡≤ó‡≥ç & ‡≤°‡≥ç‡≤∞‡≤æ‡≤™‡≥ç (Improved UI)</title>
    <style>
      :root {
        --bg: #0b1020;
        --surface: #12172b;
        --surface-2: #1a2040;
        --card: #0f1530;
        --muted: #8ea2c6;
        --text: #e6ecff;
        --accent: #6ea8ff;
        --accent-2: #7ef0c1;
        --danger: #ff7a7a;
        --warning: #ffd36e;
        --success: #7ef0c1;
        --border: 1px solid rgba(255, 255, 255, 0.12);
        --radius: 16px;
        --shadow: 0 10px 30px rgba(0, 0, 0, 0.35),
          inset 0 0 0 1px rgba(255, 255, 255, 0.04);
      }

      @media (prefers-color-scheme: light) {
        :root {
          --bg: #f7f9fc;
          --surface: #ffffff;
          --surface-2: #f3f6fb;
          --card: #ffffff;
          --muted: #556581;
          --text: #0d1222;
          --accent: #2b6cf6;
          --accent-2: #0bb88a;
          --danger: #e23e3e;
          --warning: #c98500;
          --success: #079a6a;
          --border: 1px solid rgba(13, 18, 34, 0.08);
          --shadow: 0 10px 30px rgba(13, 18, 34, 0.08);
        }
      }

      * {
        box-sizing: border-box;
      }

      html,
      body {
        height: 100%;
        margin: 0;
        overflow: hidden;
      }

      body {
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto,
          Noto Sans Kannada, Noto Sans, Arial, sans-serif;
        background: radial-gradient(
            1200px 800px at 10% 0%,
            rgba(110, 168, 255, 0.15),
            transparent 60%
          ),
          radial-gradient(
            1000px 700px at 110% -10%,
            rgba(126, 240, 193, 0.12),
            transparent 60%
          ),
          var(--bg);
        color: var(--text);
        line-height: 1.6;
        display: flex;
        flex-direction: column;
      }

      a {
        color: inherit;
      }

      /* Header - compact */
      .header {
        display: flex;
        gap: 16px;
        align-items: center;
        justify-content: space-between;
        padding: 8px 16px;
        background: linear-gradient(
            180deg,
            rgba(0, 0, 0, 0.35),
            rgba(0, 0, 0, 0)
          ),
          var(--surface);
        backdrop-filter: blur(8px);
        border-bottom: var(--border);
        flex-shrink: 0;
      }

      .brand {
        display: flex;
        gap: 12px;
        align-items: center;
      }

      .logo {
        width: 32px;
        height: 32px;
        border-radius: 8px;
        background: linear-gradient(135deg, var(--accent), var(--accent-2));
        box-shadow: var(--shadow);
      }

      .title {
        font-weight: 800;
        letter-spacing: 0.3px;
        font-size: 1.1rem;
      }

      .subtitle {
        color: var(--muted);
        font-size: 0.8rem;
      }

      /* Controls toolbar - compact */
      .toolbar {
        display: flex;
        flex-wrap: wrap;
        gap: 6px;
      }

      .btn {
        appearance: none;
        border: 0;
        border-radius: 8px;
        padding: 6px 10px;
        background: var(--surface-2);
        color: var(--text);
        cursor: pointer;
        box-shadow: var(--shadow);
        transition: transform 0.08s ease, background 0.2s ease;
        font-weight: 600;
        font-size: 0.85rem;
      }

      .btn:hover {
        transform: translateY(-1px);
      }

      .btn:active {
        transform: translateY(1px);
      }

      .btn--primary {
        background: linear-gradient(135deg, var(--accent), #8ebaff);
        color: #051028;
      }

      .btn--success {
        background: linear-gradient(135deg, var(--accent-2), #c4ffe9);
        color: #041c17;
      }

      .btn--ghost {
        background: transparent;
        border: var(--border);
      }

      .btn--danger {
        background: linear-gradient(135deg, #ff7a7a, #ffb1b1);
        color: #3d0404;
      }

      /* Main container - flexible height */
      .main-container {
        flex: 1;
        display: flex;
        flex-direction: column;
        padding: 8px 16px;
        overflow: hidden;
      }

      /* Info card - compact */
      .card {
        border-radius: var(--radius);
        background: linear-gradient(
            180deg,
            rgba(255, 255, 255, 0.04),
            rgba(255, 255, 255, 0)
          ),
          var(--card);
        box-shadow: var(--shadow);
        border: var(--border);
      }

      .info {
        padding: 8px 12px;
        margin-bottom: 8px;
        flex-shrink: 0;
      }

      details summary {
        cursor: pointer;
        list-style: none;
        font-size: 0.9rem;
      }

      details summary::-webkit-details-marker {
        display: none;
      }

      details {
        border-radius: 8px;
        border: var(--border);
        padding: 6px 8px;
        background: var(--surface-2);
        font-size: 0.85rem;
      }

      /* Grid layout - side by side with proper height */
      .grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 5px;
        flex: 1;
        overflow: hidden;
      }

      @media (max-width: 768px) {
        .grid {
          grid-template-columns: 1fr;
          grid-template-rows: 1fr 1fr;
        }
      }

      /* Panels - full height with scrolling */
      .panel {
        display: flex;
        flex-direction: column;
        overflow: hidden;
      }

      .panel__head {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 8px 12px;
        border-bottom: var(--border);
        flex-shrink: 0;
      }

      .panel__title {
        font-weight: 800;
        letter-spacing: 0.2px;
        font-size: 1rem;
      }

      .kpi {
        display: flex;
        gap: 8px;
        align-items: center;
        color: var(--muted);
      }

      .chip {
        font-size: 0.75rem;
        border-radius: 999px;
        border: var(--border);
        padding: 4px 8px;
        background: var(--surface-2);
      }

      .draggable-letter {
        font-size: 24px;
        font-weight: 800;
        cursor: grab;
        user-select: none;
        padding: 4px 6px;
        border-radius: 6px;
        transition: transform 0.12s ease, background 0.2s ease;
        display: inline-block;
      }

      .draggable-letter:hover {
        transform: scale(1.1);
        background: rgba(255, 255, 255, 0.1);
      }

      .draggable-letter:active {
        cursor: grabbing;
      }

      .dragging {
        transform: scale(1.2) rotate(-2deg) !important;
        background: linear-gradient(
          180deg,
          rgba(126, 240, 193, 0.25),
          rgba(255, 255, 255, 0.1)
        ) !important;
        z-index: 1000;
        position: relative;
      }

      /* Left list specifics */
      .placed-container {
        justify-content: space-between;
        gap: 8px;
      }

      .index {
        font: 600 11px/1 ui-monospace, SFMono-Regular, Menlo, Consolas,
          monospace;
        color: var(--muted);
        padding: 2px 6px;
        border-radius: 999px;
        border: var(--border);
        background: var(--surface);
      }

      .remove-btn {
        font: 700 16px/1 system-ui;
        color: var(--danger);
        cursor: pointer;
        padding: 2px 4px;
        border-radius: 4px;
        transition: background 0.2s ease;
      }

      .remove-btn:hover {
        background: rgba(255, 122, 122, 0.1);
      }

      /* Right pool layout */
      #right-container .panel__body {
        grid-template-columns: repeat(auto-fill, minmax(60px, 1fr));
      }

      /* Empty states */
      .empty {
        opacity: 0.65;
        font-size: 0.9rem;
        color: var(--muted);
        text-align: center;
        padding: 16px;
        grid-column: 1 / -1;
      }

      /* Footer score */
      .footer {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 8px;
        font-size: 0.85rem;
      }

      .progress {
        flex: 1;
        height: 8px;
        border-radius: 999px;
        background: rgba(255, 255, 255, 0.08);
        overflow: hidden;
      }

      .progress > span {
        display: block;
        height: 100%;
        background: linear-gradient(90deg, var(--accent), var(--accent-2));
        width: 0%;
        transition: width 0.3s ease;
      }

      /* Drop zones */
      .drop-zone {
        min-height: 40px;
        border: 2px dashed transparent;
        border-radius: 8px;
        transition: border-color 0.2s ease, background 0.2s ease;
      }

      .drop-zone.drag-over {
        border-color: var(--accent);
        background: rgba(110, 168, 255, 0.05);
      }

      /* Modal - responsive */
      .modal {
        position: fixed;
        inset: 0;
        display: none;
        align-items: center;
        justify-content: center;
        background: rgba(0, 0, 0, 0.55);
        backdrop-filter: blur(3px);
        z-index: 20;
      }

      .modal.open {
        display: flex;
      }

      .modal__card {
        max-width: 90vw;
        max-height: 80vh;
        width: min(90vw, 600px);
        background: var(--surface);
        border: var(--border);
        border-radius: 16px;
        box-shadow: var(--shadow);
        overflow: hidden;
      }

      .modal__head {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 12px 16px;
        border-bottom: var(--border);
      }

      .modal__body {
        padding: 16px;
        overflow-y: auto;
        max-height: 60vh;
      }

      .letters-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(50px, 1fr));
        gap: 8px;
      }

      .letter-pill {
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 8px;
        border-radius: 8px;
        border: var(--border);
        background: var(--surface-2);
        font-size: 20px;
        font-weight: 800;
      }

      /* Toast */
      .toast {
        position: fixed;
        left: 50%;
        transform: translateX(-50%);
        bottom: 16px;
        z-index: 25;
        background: var(--surface);
        border: var(--border);
        padding: 8px 12px;
        border-radius: 8px;
        box-shadow: var(--shadow);
        display: none;
        font-size: 0.9rem;
      }

      .toast.show {
        display: block;
        animation: slideUp 0.3s ease;
      }

      @keyframes slideUp {
        from {
          transform: translateX(-50%) translateY(100%);
          opacity: 0;
        }
        to {
          transform: translateX(-50%) translateY(0);
          opacity: 1;
        }
      }

      /* Scrollbar styling */
      .panel__body::-webkit-scrollbar {
        width: 4px;
      }

      .panel__body::-webkit-scrollbar-track {
        background: var(--surface);
      }

      .panel__body::-webkit-scrollbar-thumb {
        background: var(--muted);
        border-radius: 2px;
      }

      /* Focus */
      :focus-visible {
        outline: 2px solid var(--accent);
        outline-offset: 2px;
      }

      /* Motion reduce */
      @media (prefers-reduced-motion: reduce) {
        .btn,
        .draggable-letter,
        .progress > span {
          transition: none;
        }
      }

      /* css gpt */
    </style>
  </head>
  <body>
    <div class="app">
      <header class="header">
        <div class="brand">
          <div class="logo" aria-hidden="true"></div>
          <div>
            <div class="title">‡≤ï‡≤®‡≥ç‡≤®‡≤° ‡≤Ö‡≤ï‡≥ç‡≤∑‡≤∞‡≤ó‡≤≥ ‡≤Ü‡≤ü</div>
            <div class="subtitle">‡≤é‡≤≥‡≥Ü‡≤¶‡≥Å ‡≤¨‡≤ø‡≤ü‡≥ç‡≤ü‡≥Å ‡≤∏‡≤∞‡≤ø‡≤Ø‡≤æ‡≤¶ ‡≤ï‡≥ç‡≤∞‡≤Æ‡≤¶‡≤≤‡≥ç‡≤≤‡≤ø ‡≤Ö‡≤≥‡≤µ‡≤°‡≤ø‡≤∏‡≤ø</div>
          </div>
        </div>
        <nav class="toolbar" aria-label="Game controls">
          <button
            class="btn btn--ghost"
            id="shuffleBtn"
            title="‡≤Ö‡≤ï‡≥ç‡≤∑‡≤∞‡≤ó‡≤≥‡≤®‡≥ç‡≤®‡≥Å ‡≤Æ‡≤ø‡≤∂‡≥ç‡≤∞‡≤ø‡≤§ ‡≤Æ‡≤æ‡≤°‡≤ø"
          >
            üîÄ ‡≤Æ‡≤ø‡≤∂‡≥ç‡≤∞‡≤ø‡≤§
          </button>
          <button class="btn" id="hintBtn" title="‡≤∏‡≤≤‡≤π‡≥Ü ‡≤§‡≥ã‡≤∞‡≤ø‡≤∏‡≤ø/‡≤Æ‡≤∞‡≥Ü‡≤Æ‡≤æ‡≤°‡≤ø">
            üí° ‡≤∏‡≤≤‡≤π‡≥Ü
          </button>
          <button class="btn btn--success" id="checkBtn">‚úÖ ‡≤™‡≤∞‡≤ø‡≤∂‡≥Ä‡≤≤‡≤ø‡≤∏‡≤ø</button>
          <button class="btn" id="showCorrectBtn">üìú ‡≤∏‡≤∞‡≤ø‡≤Ø‡≤æ‡≤¶ ‡≤ï‡≥ç‡≤∞‡≤Æ</button>
          <button class="btn btn--danger" id="resetBtn">‚Ü∫ ‡≤Æ‡≤∞‡≥Å‡≤∏‡≥ç‡≤•‡≤æ‡≤™‡≤ø‡≤∏‡≤ø</button>
        </nav>
      </header>

      <div class="main-container">
        <section class="card info">
          <details id="helpBox" open>
            <summary><strong>‡≤¨‡≤≥‡≤ï‡≥Ü ‡≤∏‡≥Ç‡≤ö‡≤®‡≥Ü</strong></summary>
            <div>
              ‡≤¨‡≤≤ ‡≤™‡≥ç‡≤Ø‡≤æ‡≤®‡≥Ü‡≤≤‡≥ç‚Äå‡≤®‡≤ø‡≤Ç‡≤¶ ‡≤Ö‡≤ï‡≥ç‡≤∑‡≤∞‡≤ó‡≤≥‡≤®‡≥ç‡≤®‡≥Å ‡≤é‡≤° ‡≤™‡≥ç‡≤Ø‡≤æ‡≤®‡≥Ü‡≤≤‡≥ç‚Äå‡≤ó‡≥Ü ‡≤é‡≤≥‡≥Ü‡≤Ø‡≤ø‡≤∞‡≤ø. ‡≤Ö‡≤ï‡≥ç‡≤∑‡≤∞‡≤¶ ‡≤Æ‡≥á‡≤≤‡≥Ü
              ‡≤ï‡≥ç‡≤≤‡≤ø‡≤ï‡≥ç ‡≤Æ‡≤æ‡≤°‡≤ø‡≤¶‡≤∞‡≥Ç ‡≤Ü‡≤ó‡≥Å‡≤§‡≥ç‡≤§‡≤¶‡≥Ü. ‡≤é‡≤° ‡≤™‡≥ç‡≤Ø‡≤æ‡≤®‡≥Ü‡≤≤‡≥ç‚Äå‡≤®‡≤≤‡≥ç‡≤≤‡≤ø ‡≤ï‡≥ç‡≤∞‡≤Æ ‡≤¨‡≤¶‡≤≤‡≤æ‡≤Ø‡≤ø‡≤∏‡≤≤‡≥Å
              ‡≤Æ‡≥á‡≤≤‡≥ç‡≤ï‡≤°‡≥Ü/‡≤ï‡≥Ü‡≤≥‡≤ï‡≤°‡≥Ü‡≤ó‡≥Ü ‡≤é‡≤≥‡≥Ü‡≤Ø‡≤ø‡≤∞‡≤ø. √ó ‡≤Æ‡≥á‡≤≤‡≥Ü ‡≤ï‡≥ç‡≤≤‡≤ø‡≤ï‡≥ç ‡≤Æ‡≤æ‡≤°‡≤ø‡≤¶‡≤∞‡≥Ü ‡≤Ö‡≤ï‡≥ç‡≤∑‡≤∞‡≤µ‡≥Å ‡≤Æ‡≤∞‡≥Å ‡≤¨‡≤≤‡≤ï‡≥ç‡≤ï‡≥Ü
              ‡≤π‡≥ã‡≤ó‡≥Å‡≤§‡≥ç‡≤§‡≤¶‡≥Ü.
            </div>
          </details>
          <div class="footer">
            <div class="kpi">
              <span class="chip"
                >‡≤á‡≤ü‡≥ç‡≤ü‡≤¶‡≥ç‡≤¶‡≥Å: <span id="placedCount">0</span>/<span id="totalCount"
                  >0</span
                ></span
              >
              <span class="chip">‡≤Ö‡≤Ç‡≤ï‡≤ó‡≤≥‡≥Å: <span id="score">0</span>%</span>
            </div>
            <div class="progress" aria-hidden="true">
              <span id="progressFill"></span>
            </div>
          </div>
        </section>

        <main class="grid">
          <!-- Left: Place Here -->
          <section
            class="card panel"
            id="leftPanel"
            aria-labelledby="leftTitle"
          >
            <div class="panel__head">
              <h2 id="leftTitle" class="panel__title">‡≤á‡≤≤‡≥ç‡≤≤‡≤ø ‡≤á‡≤∞‡≤ø‡≤∏‡≤ø</h2>
              <div class="kpi">
                <span class="chip" id="leftHint">‡≤Ö‡≤ï‡≥ç‡≤∑‡≤∞‡≤ó‡≤≥‡≤®‡≥ç‡≤®‡≥Å ‡≤á‡≤≤‡≥ç‡≤≤‡≤ø ‡≤¨‡≤ø‡≤°‡≤ø</span>
              </div>
            </div>
            <div
              id="left-container"
              class="panel__body drop-zone"
              role="list"
              aria-live="polite"
            >
              <div class="empty" id="leftEmpty">
                ‡≤á‡≤≤‡≥ç‡≤≤‡≤ø ‡≤Ö‡≤ï‡≥ç‡≤∑‡≤∞‡≤ó‡≤≥‡≤®‡≥ç‡≤®‡≥Å ‡≤é‡≤≥‡≥Ü‡≤¶‡≥Å ‡≤á‡≤°‡≤ø‚Ä¶
              </div>
            </div>
          </section>

          <!-- Right: Letters -->
          <section
            class="card panel"
            id="rightPanel"
            aria-labelledby="rightTitle"
          >
            <div class="panel__head">
              <h2 id="rightTitle" class="panel__title">‡≤Ö‡≤ï‡≥ç‡≤∑‡≤∞‡≤ó‡≤≥‡≥Å</h2>
              <div class="kpi">
                <span class="chip"
                  >‡≤≤‡≤≠‡≥ç‡≤Ø: <span id="availableCount">0</span></span
                >
              </div>
            </div>
            <div
              id="right-container"
              class="panel__body"
              aria-label="Draggable letters"
            ></div>
          </section>
        </main>
      </div>

      <!-- Modal: Correct Order -->
      <div class="modal" id="modal">
        <div class="modal__card">
          <div class="modal__head">
            <h3>‡≤∏‡≤∞‡≤ø‡≤Ø‡≤æ‡≤¶ ‡≤ï‡≥ç‡≤∞‡≤Æ</h3>
            <button class="btn btn--ghost" id="closeModal" aria-label="Close">
              ‚úï
            </button>
          </div>
          <div class="modal__body">
            <div class="letters-grid" id="correctGrid"></div>
          </div>
        </div>
      </div>

      <div class="toast" id="toast" role="status" aria-live="polite"></div>
    </div>

    <script>
      // === Data ===
      const KANNADA = [
        "‡≤Ö",
        "‡≤Ü",
        "‡≤á",
        "‡≤à",
        "‡≤â",
        "‡≤ä",
        "‡≤ã",
        "‡≤é",
        "‡≤è",
        "‡≤ê",
        "‡≤í",
        "‡≤ì",
        "‡≤î",
        "‡≤ï",
        "‡≤ñ",
        "‡≤ó",
        "‡≤ò",
        "‡≤ô",
        "‡≤ö",
        "‡≤õ",
        "‡≤ú",
        "‡≤ù",
        "‡≤û",
        "‡≤ü",
        "‡≤†",
        "‡≤°",
        "‡≤¢",
        "‡≤£",
        "‡≤§",
        "‡≤•",
        "‡≤¶",
        "‡≤ß",
        "‡≤®",
        "‡≤™",
        "‡≤´",
        "‡≤¨",
        "‡≤≠",
        "‡≤Æ",
        "‡≤Ø",
        "‡≤∞",
        "‡≤≤",
        "‡≤µ",
        "‡≤∂",
        "‡≤∑",
        "‡≤∏",
        "‡≤π",
        "‡≤≥",
        "‡≤Ö‡≤Ç",
        "‡≤Ö‡≤É",
      ];
      let available = [...KANNADA];
      let placed = [];

      // === DOM ===
      const leftContainer = document.getElementById("left-container");
      const rightContainer = document.getElementById("right-container");
      const placedCount = document.getElementById("placedCount");
      const totalCount = document.getElementById("totalCount");
      const availableCount = document.getElementById("availableCount");
      const progressFill = document.getElementById("progressFill");
      const scoreOut = document.getElementById("score");
      const leftEmpty = document.getElementById("leftEmpty");

      const shuffleBtn = document.getElementById("shuffleBtn");
      const hintBtn = document.getElementById("hintBtn");
      const checkBtn = document.getElementById("checkBtn");
      const resetBtn = document.getElementById("resetBtn");
      const showCorrectBtn = document.getElementById("showCorrectBtn");

      const modal = document.getElementById("modal");
      const correctGrid = document.getElementById("correctGrid");
      const closeModal = document.getElementById("closeModal");
      const toast = document.getElementById("toast");

      // === Utils ===
      const randShuffle = (arr) => [...arr].sort(() => Math.random() - 0.5);
      const showToast = (msg) => {
        toast.textContent = msg;
        toast.classList.add("show");
        setTimeout(() => toast.classList.remove("show"), 2400);
      };
      const updateKPI = () => {
        placedCount.textContent = placed.length;
        totalCount.textContent = KANNADA.length;
        availableCount.textContent = available.length;
        const pct =
          Math.round(
            (placed.filter((l, i) => l === KANNADA[i]).length /
              KANNADA.length) *
              100
          ) || 0;
        scoreOut.textContent = pct;
        progressFill.style.width = `${(placed.length / KANNADA.length) * 100}%`;
        leftEmpty.style.display = placed.length ? "none" : "block";
      };

      // === Renderers ===
      function renderRight() {
        rightContainer.innerHTML = "";
        const list = randShuffle(available);
        if (!list.length) {
          const empty = document.createElement("div");
          empty.className = "empty";
          empty.textContent = "‡≤é‡≤≤‡≥ç‡≤≤‡≤æ ‡≤Ö‡≤ï‡≥ç‡≤∑‡≤∞‡≤ó‡≤≥‡≥Å ‡≤¨‡≤≥‡≤∏‡≤≤‡≤æ‡≤ó‡≤ø‡≤¶‡≥Ü!";
          rightContainer.appendChild(empty);
          return;
        }
        list.forEach((letter) => {
          const container = document.createElement("div");
          container.className = "letter-container";

          const letterEl = document.createElement("span");
          letterEl.className = "draggable-letter";
          letterEl.textContent = letter;
          letterEl.draggable = true;
          letterEl.dataset.letter = letter;
          letterEl.addEventListener("dragstart", dragStart);
          letterEl.addEventListener("dragend", dragEnd);
          letterEl.addEventListener("click", () => moveToLeft(letter));

          container.appendChild(letterEl);
          rightContainer.appendChild(container);
        });
      }

      function renderLeft() {
        leftContainer.innerHTML = "";
        if (!placed.length) {
          leftContainer.appendChild(leftEmpty);
          return;
        }
        placed.forEach((letter, idx) => {
          const container = document.createElement("div");
          container.className = "letter-container placed-container";

          const indexEl = document.createElement("span");
          indexEl.className = "index";
          indexEl.textContent = idx + 1;

          const letterEl = document.createElement("span");
          letterEl.className = "draggable-letter";
          letterEl.textContent = letter;
          letterEl.draggable = true;
          letterEl.dataset.letter = letter;
          letterEl.addEventListener("dragstart", dragStart);
          letterEl.addEventListener("dragend", dragEnd);

          const removeBtn = document.createElement("span");
          removeBtn.className = "remove-btn";
          removeBtn.textContent = "√ó";
          removeBtn.title = "‡≤§‡≥Ü‡≤ó‡≥Ü‡≤¶‡≥Å‡≤π‡≤æ‡≤ï‡≤ø";
          removeBtn.addEventListener("click", () =>
            removeFromLeft(letter, idx)
          );

          container.appendChild(indexEl);
          container.appendChild(letterEl);
          container.appendChild(removeBtn);
          leftContainer.appendChild(container);
        });
      }

      // === DnD ===
      let dragSource = null;
      function dragStart(e) {
        e.dataTransfer.setData("text/plain", e.target.dataset.letter);
        e.target.classList.add("dragging");
        dragSource =
          e.target.closest("#right-container,#left-container")?.id || null;
      }
      function dragEnd(e) {
        e.target.classList.remove("dragging");
        leftContainer.classList.remove("drag-over");
      }

      // Drop zone styling
      leftContainer.addEventListener("dragover", (e) => {
        e.preventDefault();
        leftContainer.classList.add("drag-over");
      });

      leftContainer.addEventListener("dragleave", (e) => {
        if (!leftContainer.contains(e.relatedTarget)) {
          leftContainer.classList.remove("drag-over");
        }
      });

      leftContainer.addEventListener("drop", (e) => {
        e.preventDefault();
        leftContainer.classList.remove("drag-over");
        const letter = e.dataTransfer.getData("text/plain");
        const target = e.target.closest(".letter-container");

        if (dragSource === "right-container") {
          if (!available.includes(letter)) return;
          if (target && target.querySelector(".draggable-letter")) {
            const rect = target.getBoundingClientRect();
            const before = e.clientY - rect.top < rect.height / 2;
            const insertIndex =
              [...leftContainer.querySelectorAll(".letter-container")].indexOf(
                target
              ) + (before ? 0 : 1);
            available = available.filter((l) => l !== letter);
            placed.splice(insertIndex, 0, letter);
          } else {
            available = available.filter((l) => l !== letter);
            placed.push(letter);
          }
        } else if (dragSource === "left-container") {
          const fromIdx = placed.indexOf(letter);
          if (fromIdx === -1) return;
          placed.splice(fromIdx, 1);
          if (target && target.querySelector(".draggable-letter")) {
            const rect = target.getBoundingClientRect();
            const before = e.clientY - rect.top < rect.height / 2;
            const toIdx =
              [...leftContainer.querySelectorAll(".letter-container")].indexOf(
                target
              ) + (before ? 0 : 1);
            placed.splice(toIdx, 0, letter);
          } else {
            placed.push(letter);
          }
        }
        renderLeft();
        renderRight();
        updateKPI();
      });

      // Quick click
      // Quick click
      function moveToLeft(letter) {
        if (!available.includes(letter)) return;
        available = available.filter((l) => l !== letter);
        placed.push(letter);
        renderLeft();
        renderRight();
        updateKPI();
      }

      function removeFromLeft(letter, idx) {
        placed.splice(idx, 1);
        available.push(letter);
        renderLeft();
        renderRight();
        updateKPI();
      }

      // === Controls ===
      shuffleBtn.addEventListener("click", () => {
        available = randShuffle(available);
        renderRight();
        showToast("‡≤Ö‡≤ï‡≥ç‡≤∑‡≤∞‡≤ó‡≤≥‡≤®‡≥ç‡≤®‡≥Å ‡≤Æ‡≤ø‡≤∂‡≥ç‡≤∞‡≤ø‡≤§ ‡≤Æ‡≤æ‡≤°‡≤≤‡≤æ‡≤ó‡≤ø‡≤¶‡≥Ü");
      });

      hintBtn.addEventListener("click", () => {
        const helpBox = document.getElementById("helpBox");
        helpBox.open = !helpBox.open;
        showToast(helpBox.open ? "‡≤∏‡≤≤‡≤π‡≥Ü ‡≤§‡≥ã‡≤∞‡≤ø‡≤∏‡≤≤‡≤æ‡≤ó‡≤ø‡≤¶‡≥Ü" : "‡≤∏‡≤≤‡≤π‡≥Ü ‡≤Æ‡≤∞‡≥Ü‡≤Æ‡≤æ‡≤°‡≤≤‡≤æ‡≤ó‡≤ø‡≤¶‡≥Ü");
      });

      checkBtn.addEventListener("click", () => {
        let correct = 0;
        placed.forEach((letter, idx) => {
          if (letter === KANNADA[idx]) correct++;
        });
        const pct = Math.round((correct / KANNADA.length) * 100);
        showToast(`‡≤™‡≤∞‡≤ø‡≤∂‡≥Ä‡≤≤‡≤®‡≥Ü: ${correct}/${KANNADA.length} (${pct}%)`);
      });

      resetBtn.addEventListener("click", () => {
        available = [...KANNADA];
        placed = [];
        renderLeft();
        renderRight();
        updateKPI();
        showToast("‡≤Æ‡≤∞‡≥Å‡≤∏‡≥ç‡≤•‡≤æ‡≤™‡≤ø‡≤∏‡≤≤‡≤æ‡≤ó‡≤ø‡≤¶‡≥Ü");
      });

      showCorrectBtn.addEventListener("click", () => {
        correctGrid.innerHTML = "";
        KANNADA.forEach((letter) => {
          const el = document.createElement("div");
          el.className = "letter-pill";
          el.textContent = letter;
          correctGrid.appendChild(el);
        });
        modal.classList.add("open");
      });

      closeModal.addEventListener("click", () => {
        modal.classList.remove("open");
      });

      // === Init ===
      function init() {
        available = [...KANNADA];
        placed = [];
        renderLeft();
        renderRight();
        updateKPI();
      }
      init();
    </script>
  </body>
</html>
